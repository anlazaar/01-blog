<div class="auth-page">
  <div class="auth-container">
    <!-- Header -->
    <div class="auth-header">
      <h1>Join the community.</h1>
      <p>Create an account to start sharing your stories.</p>
    </div>

    <!-- Social Login -->
    <div class="social-login">
      <button class="social-btn google" type="button" (click)="loginWithGoogle()">
        <fa-icon [icon]="faGoogle"></fa-icon>
        <span>Sign up with Google</span>
      </button>
      <button class="social-btn github" type="button" (click)="loginWithGithub()">
        <fa-icon [icon]="faGithub"></fa-icon>
        <span>Sign up with GitHub</span>
      </button>
    </div>

    <div class="divider">or</div>

    <!-- Form -->
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      <!-- Email -->
      <div class="input-group">
        <label>Email</label>
        <input
          type="email"
          formControlName="email"
          placeholder="name@example.com"
          [class.error-input]="
            registerForm.get('email')?.touched && registerForm.get('email')?.invalid
          "
        />

        @if (registerForm.get('email')?.touched && registerForm.get('email')?.invalid) {
        <div class="error-msg">
          @if (registerForm.get('email')?.errors?.['required']) {
          <small>Email is required.</small>
          } @if (registerForm.get('email')?.errors?.['email']) {
          <small>Invalid email format.</small>
          }
        </div>
        }
      </div>

      <!-- Username -->
      <div class="input-group">
        <label>Username</label>
        <input
          type="text"
          formControlName="username"
          placeholder="Your Name"
          [class.error-input]="
            registerForm.get('username')?.touched && registerForm.get('username')?.invalid
          "
        />

        @if (registerForm.get('username')?.touched && registerForm.get('username')?.invalid) {
        <div class="error-msg">
          @if (registerForm.get('username')?.errors?.['required']) {
          <small>Username is required.</small>
          } @if (registerForm.get('username')?.errors?.['minlength']) {
          <small>At least 3 characters.</small>
          }
        </div>
        }
      </div>

      <!-- Password -->
      <div class="input-group">
        <label>Password</label>
        <input
          type="password"
          formControlName="password"
          placeholder="••••••••"
          [class.error-input]="
            registerForm.get('password')?.touched && registerForm.get('password')?.invalid
          "
        />

        @if (registerForm.get('password')?.touched && registerForm.get('password')?.invalid) {
        <div class="error-msg">
          @if (registerForm.get('password')?.errors?.['required']) {
          <small>Password is required.</small>
          } @if (registerForm.get('password')?.errors?.['minlength']) {
          <small>At least 6 characters.</small>
          }
        </div>
        }
      </div>

      <!-- Repeat Password -->
      <div class="input-group">
        <label>Confirm Password</label>
        <input
          type="password"
          formControlName="repeatPassword"
          placeholder="••••••••"
          [class.error-input]="
            registerForm.get('repeatPassword')?.touched &&
            registerForm.get('repeatPassword')?.invalid
          "
        />

        @if (registerForm.get('repeatPassword')?.touched &&
        registerForm.get('repeatPassword')?.invalid) {
        <div class="error-msg">
          @if (registerForm.get('repeatPassword')?.errors?.['required']) {
          <small>Confirmation is required.</small>
          } @if (registerForm.get('repeatPassword')?.errors?.['passwordMismatch']) {
          <small>Passwords must match.</small>
          }
        </div>
        }
      </div>

      <!-- Global Error -->
      @if (errorMessage()) {
      <div class="global-error">
        {{ errorMessage() }}
      </div>
      }

      <!-- Submit -->
      <button class="submit-btn" type="submit" [disabled]="registerForm.invalid || isSubmitting()">
        {{ isSubmitting() ? 'Signing up...' : 'Sign up' }}
      </button>

      <!-- Footer -->
      <div class="auth-footer">
        Already have an account? <a routerLink="/auth/login">Sign in</a>
      </div>
    </form>
  </div>
</div>
