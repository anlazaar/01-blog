<div class="login-page onboarding-page">
  <div class="login-container">
    <form [formGroup]="publicInfoForm" (ngSubmit)="onSubmit()">
      <div class="title">
        <h1>Complete Your Profile</h1>
        <p>Help readers know who you are.</p>
      </div>

      <!-- 1. Avatar Section (Top) -->
      <div class="avatar-upload-section">
        <div class="avatar-circle">
          @if (avatarPreview) {
          <img [src]="avatarPreview" alt="Preview" />
          } @else {
          <div class="placeholder">
            <!-- Requires CommonModule for uppercase pipe -->
            {{ publicInfoForm.get('firstname')?.value?.charAt(0) || '?' | uppercase }}
          </div>
          }
        </div>

        <div class="upload-trigger">
          <label for="fileInput">Add a photo</label>
          <input
            id="fileInput"
            type="file"
            (change)="onFileSelected($event)"
            accept="image/*"
            hidden
          />
          @if (fileError) {
          <span class="error-msg">{{ fileError }}</span>
          }
        </div>
      </div>

      <!-- 2. Name Fields (Side by Side) -->
      <div class="form-row">
        <div class="input-group">
          <label>First Name</label>
          <input type="text" formControlName="firstname" placeholder="Jane" />
        </div>
        <div class="input-group">
          <label>Last Name</label>
          <input type="text" formControlName="lastname" placeholder="Doe" />
        </div>
      </div>

      <!-- 3. Bio -->
      <div class="input-group">
        <label>Short Bio</label>
        <textarea formControlName="bio" placeholder="Tell your story..." rows="3"></textarea>

        @if (publicInfoForm.get('bio')?.touched && publicInfoForm.get('bio')?.invalid) {
        <div class="error-banner">
          <small>Bio is required.</small>
        </div>
        }
      </div>

      <!-- 4. Actions -->
      <div class="actions">
        <button class="main-btn" type="submit" [disabled]="publicInfoForm.invalid">Continue</button>

        <button class="skip-btn" type="button" (click)="skip()">I'll do this later</button>
      </div>
    </form>
  </div>
</div>
  